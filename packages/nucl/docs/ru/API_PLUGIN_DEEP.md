# Плагин `deep-state` (Глубокая реактивность)

Плагин `deep-state` позволяет нуклону отслеживать изменения внутри сложных объектов и массивов, используя Proxy. Это делает работу с состоянием похожей на Vue или MobX.

## Подключение
```typescript
import '@alaq/nucl/presets/deep';
// Или вручную
const n = Nv({ a: 1 }, { plugins: [deepStatePlugin] });
```

## Как это работает

Обычно при изменении свойства внутри объекта (например, `n.value.count++`) нуклон не знает об этом, так как ссылка на сам объект не изменилась. Плагин `deep-state` оборачивает значение в Proxy и:

1.  **Автоматически уведомляет подписчиков** (`.up()`, `fusion`) при изменении любого вложенного свойства.
2.  **Позволяет использовать мутации**: Вам не нужно создавать копию всего объекта через деструктуризацию для простых правок.

```typescript
const user = Nv({ name: 'Ivan', stats: { age: 25 } }, { kind: 'deep' });

user.up(val => console.log('Данные изменились:', val));

// Это вызовет срабатывание .up()
user.value.stats.age = 26;
```

## Особенности

- **Сырые данные**: Если вам нужно получить оригинальный объект без Proxy (например, для передачи в стороннюю библиотеку), вызовите нуклон как функцию без аргументов: `const raw = n()`. Свойство `n.value` в этом плагине всегда возвращает Proxy.
- **Производительность**: Использование Proxy добавляет небольшие накладные расходы при доступе к свойствам. Используйте этот плагин только там, где действительно нужна глубокая реактивность.
- **Интеграция с Fusion**: Плагин передает информацию о типе операции (GET/SET) во внутренние механизмы Nucl, что позволяет Fusion работать более точно.
- **Immutable**: Несмотря на то, что вы можете мутировать объект, само событие изменения все равно срабатывает по правилам реактивного потока.
