# Концепция Nucl: Нуклон

Этот документ описывает ключевые принципы `@alaq/nucl` — расширенного реактивного примитива (Нуклона), построенного на базе Quark.

## 1. Нуклон — Кварк с плагинами
Если **Quark (Кварк)** — это простейшая «атомарная» частица состояния, то **Nucl (Нуклон)** — это структура, дополненная **Системой Плагинов**.

- **Quark:** Чистая скорость, минимум памяти, базовая реактивность.
- **Nucl:** Расширяемость через плагины, методы-хелперы и встроенные вычисления.

Нуклон позволяет вам платить производительностью только за те функции, которые вы реально используете. Подробнее о ядре читайте в [API Reference (Core)](./API.md).

## 2. Плагины и Виды (Kinds)
Нуклон создается с определенным «Видом» (Kind), который определяет набор его методов. Вы можете комбинировать несколько видов через пробел, например `kind: "std deep"`.

- **`+` (Default):** Самый быстрый нуклон. Почти идентичен Кварку.
- **`std`:** Добавляет методы для работы со структурами данных (`isEmpty`, `push`, `set/get`).
- **`deep`:** Включает глубокую реактивность через Proxy.

Подробнее о подключении и создании своих расширений читайте в [API Plugins](./API_PLUGINS.md).

```typescript
import { Nv } from '@alaq/nucl';
import '@alaq/nucl/presets/std';

// Использование стандартных хелперов
const list = Nv([1, 2], { kind: 'std' });
list.push(3); 
console.log(list.size); // 3
```

## 3. Чтение значения: n.value vs n()
Нуклон предоставляет два способа получения данных:
1.  **`n.value`**: Стандартный способ. Если включен плагин `deep`, вернет **Proxy** для глубокого отслеживания.
2.  **`n()`**: Вызов без аргументов всегда возвращает **сырое (raw) значение**. Это полезно для передачи данных в сторонние библиотеки или оптимизации.

```typescript
const user = Nv({ name: 'Ivan' }, { kind: 'deep' });

console.log(user.value); // Proxy { name: 'Ivan' }
console.log(user());      // { name: 'Ivan' } (оригинальный объект)
```

## 4. Fusion: Синтез состояний
Для создания вычисляемых значений (Computed) используется механизм **Fusion**. Он позволяет гибко настраивать зависимости и стратегии обновления через удобный Builder.

```typescript
import { Nv, fusion } from '@alaq/nucl'

const a = Nv(10)
const b = Nv(20)

// Синтез нового значения со стратегией 'alive'
const sum = fusion(a, b).alive((valA, valB) => valA + valB)

sum.up(val => console.log('Сумма:', val)) // 30
```
Полное описание стратегий и примеров доступно в [Fusion API](./API_PLUGIN_FUSION.md).

## 5. Глубокая реактивность
С плагином `deep` вы можете мутировать вложенные свойства объектов, и Нуклон автоматически уведомит всех подписчиков. Это делает работу с комплексным состоянием максимально простой. Подробности в [Deep State API](./API_PLUGIN_DEEP.md).

## Резюме
- **Nucl** = Кварк + Плагины.
- **Kind (Вид)** = Именованный пресет плагинов. Можно комбинировать: `kind: "std deep"`.
- **n()** = Способ быстро получить «чистые» данные без прокси.
- **Fusion** = Реактивный клей между нуклонами.