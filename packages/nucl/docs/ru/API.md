# Справочник API Nucl (Core)

Этот документ описывает базовые возможности Нуклона без учета плагинов.

## Фабрики

### `Nu(options)`
Базовая фабрика для создания Нуклона.

**Опции:**
- `value` — Начальное значение.
- `kind` — Имя пресета плагинов (по умолчанию `"+"`).
- `plugins` — Массив локальных плагинов.
- `id` — Идентификатор (для отладки/событий).
- `realm` — Имя области видимости (Quantum Bus).
- `dedup` — Дедупликация (по умолчанию `true`).
- `pipe` — Функция-трансформер перед записью.

```typescript
import { Nu } from '@alaq/nucl';
const n = Nu({ value: 10 });
```

### `Nv(value, options)`
Сокращенная форма `Nu({ value, ...options })`.

```typescript
import { Nv } from '@alaq/nucl';
const n = Nv(10, { id: 'my-nucl' });
```

---

## Работа со значением

Нуклон является вызываемым объектом (функцией).

- **Чтение**: `n.value` или вызов `n()`
- **Запись**: `n(newValue)` или `n.value = newValue`

```typescript
const n = Nv(1);

// Чтение
console.log(n.value); // 1
console.log(n());      // 1 (то же самое, но всегда возвращает "сырое" значение)

// Запись
n(2);             // Установка через вызов
n.value = 3;      // Установка через свойство
```

> **Важно**: Вызов `n()` без аргументов всегда возвращает "чистое" (raw) значение, даже если используется плагин глубокой реактивности (`kind: 'deep'`). Это полезно для передачи данных в функции, которые не ожидают Proxy.

---

## Основные методы (Наследование от Quark)

### `.up(listener)`
Подписка на изменения. Слушатель вызывается **немедленно** при подписке и при каждом изменении.
```typescript
n.up((val) => console.log('Changed to:', val));
```

### `.down(listener)`
Отписка от изменений.
```typescript
const logger = v => console.log(v);
n.up(logger);
n.down(logger);
```

### `.silent(value)`
Обновление значения **без** уведомления подписчиков и без отправки события в шину (Quantum Bus).

### `.decay()`
Уничтожение нуклона. Очищает всех слушателей и удаляет ссылки на данные. После этого нуклон перестает работать.

---

## Плагины и расширения

Для расширения возможностей Нуклона (методы `.push`, `.fusion`, глубокая реактивность) обратитесь к соответствующим разделам:
- [Система плагинов и Kinds](./API_PLUGINS.md)
- [Стандартные хелперы (std)](./API_PLUGIN_STD.md)
- [Глубокая реактивность (deep-state)](./API_PLUGIN_DEEP.md)
- [Вычисляемые значения (Fusion)](./API_PLUGIN_FUSION.md)